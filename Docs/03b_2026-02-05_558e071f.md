# Session 3b - 2026-02-05 (Falling Leaves)
**Session ID:** `558e071f-484f-41a2-a94c-87dff511f174`
**Vegetation prompts:** 4 / 4 total user messages
**Note:** All prompts are vegetation-related (falling leaves particle system)

---

## Prompt 1 [VEG]
*2026-02-05T21:52:07.502Z*

Implement the following plan:

# Falling Leaves - Complete Redesign

## Current Problems
1. Billboard particles look flat and fake
2. Single-axis rotation creates unnatural synchronized wobble
3. Noise-based movement feels random, not wind-driven
4. No sense of weight or physicality
5. All leaves move identically - no variation

## Research Findings

From Unity Renderer Module docs:
- **Mesh render mode** gives particles 3D authenticity vs flat billboards
- Multiple meshes can be weighted for variety
- Supports true 3D rotation on all axes

From Unity Rotation over Lifetime docs:
- **Separate Axes** allows different rotation speeds on X, Y, Z
- Creates natural tumbling vs mechanical spinning
- X = pitch/tilt, Y = yaw/spin, Z = roll

From GameDev.net research:
- Real leaves have 3 motion types: **flutter** (oscillate), **tumble** (rotate+drift), **spiral**
- Motion depends on leaf shape, weight, wind

---

## New Approach: Mesh Particles with 3D Tumble

### Key Changes

| Aspect | Current (Bad) | New (Good) |
|--------|---------------|------------|
| Render Mode | Billboard (flat) | **Mesh** (3D) |
| Mesh | None (sprite) | **Simple leaf quad mesh** |
| Rotation | Z-axis only | **X, Y, Z separate** |
| Start Rotation | 2D random | **3D random all axes** |
| Movement | Noise (random scatter) | **Wind velocity + subtle noise** |

### Mesh Particle Benefits
- Looks 3D from all angles
- Natural tumbling rotation
- Can catch light differently
- Feels like actual objects, not sprites

---

## Implementation

### Step 1: Create Simple Leaf Mesh (or use quad)

For low-poly style, a simple quad or diamond shape works. The mesh gives 3D rotation capability even if flat.

Options:
- Use Unity's built-in Quad mesh
- Create simple 4-vertex leaf shape in Blender
- Use existing leaf mesh from LMHPOLY assets

### Step 2: Update FallingLeavesGenerator

**New Settings:**
```csharp
[Header("Mesh")]
Mesh leafMesh;  // Assign quad or leaf mesh

[Header("Movement")]
Vector2 windDirection = new Vector2(1f, 0f);
float windStrength = 1.0f;
float fallSpeed = 0.03f;
float pathVariation = 0.1f;  // Subtle noise only

[Header("3D Rotation")]
float tumbleSpeedX = 30f;   // Pitch/tilt
float tumbleSpeedY = 60f;   // Yaw/spin (primary)
float tumbleSpeedZ = 20f;   // Roll
```

**Module Changes:**

1. **Renderer Module:**
   - `renderMode` = Mesh (not Billboard)
   - `mesh` = leafMesh
   - `renderAlignment` = World or Velocity

2. **Main Module:**
   - `startRotation3D` = true
   - `startRotationX` = Random(0, 360)
   - `startRotationY` = Random(0, 360)
   - `startRotationZ` = Random(0, 360)

3. **Rotation over Lifetime:**
   - `separateAxes` = true
   - `x` = Random(-tumbleSpeedX, +tumbleSpeedX)
   - `y` = Random(-tumbleSpeedY, +tumbleSpeedY)
   - `z` = Random(-tumbleSpeedZ, +tumbleSpeedZ)

4. **Velocity over Lifetime:**
   - Wind direction as constant velocity
   - Primary movement source

5. **Noise Module:**
   - Very subtle (0.05-0.1 strength)
   - Just for slight path variation
   - NOT the main movement

6. **Other randomization:**
   - Lifetime: wide range (4-10s)
   - Size: varied (0.1-0.4)
   - Start speed: low varied (0.05-0.3)

---

## Files to Modify

| File | Changes |
|------|---------|
| `Assets/_Project/Scripts/Effects/FallingLeavesGenerator.cs` | Complete rewrite with mesh mode, 3D rotation |

---

## Key Principles

1. **Mesh mode** - not billboard, gives 3D presence
2. **3D rotation on all axes** - natural tumbling, not flat spin
3. **Wind as primary velocity** - consistent direction
4. **Noise as subtle variation only** - not main movement
5. **Wide randomization** - lifetime, size, rotation speeds all varied
6. **Different rotation per axis** - Y fastest (spin), X/Z slower (wobble)

---

## Prompt 2 [VEG]
*2026-02-05T22:00:43.235Z*

theres still a wavyness to them that is extremely predicable and syncronized and looks awful

---

## Prompt 3 [VEG]
*2026-02-05T22:00:55.038Z*

theres still a wavyness to the moevement that is extremely predicable and syncronized and looks awful

---

## Prompt 4 [VEG]
*2026-02-05T22:06:22.298Z*

Can i control the emission zone shape? rightn ow its a circle but my tree is a oval, so some parts dotn emit leaves and some are emitted from thin air

---
